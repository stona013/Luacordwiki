function scaleCoordinates(input, sourceWidth, sourceHeight, targetWidth, targetHeight) {
  const coords = input.split(',').map(Number);

  if (coords.length % 2 !== 0) {
    throw new Error("Ungültige Koordinatenanzahl – es müssen x/y-Paare sein.");
  }

  const scaleX = targetWidth / sourceWidth;
  const scaleY = targetHeight / sourceHeight;

  const scaled = [];

  for (let i = 0; i < coords.length; i += 2) {
    const x = Math.round(coords[i] * scaleX);
    const y = Math.round(coords[i + 1] * scaleY);
    scaled.push(x, y);
  }

  return scaled.join(',');
}

// Beispielnutzung:
const inputCoords = "159,1714,180,1685,202,1659,209,1630,213,1605,213,1572,209,1544,209,1515,227,1493,249,1482,264,1464,300,1435,314,1410,332,1384,365,1352,401,1344,430,1334,488,1323,535,1326,571,1334,604,1341,633,1348,672,1373,705,1388,748,1413,795,1435,821,1446,861,1464,911,1486,940,1486,965,1496,991,1518,1002,1536,1023,1551,1056,1583,1078,1612,1099,1659,1107,1703,1114,1732,1139,1743,1183,1761,1222,1764,1269,1779,1302,1811,1335,1826,1374,1826,1432,1826,1468,1873,1461,1840,1490,1920,1497,1942,1544,1956,1559,2000,1544,2025,1526,2047,1508,2058,1505,2083,1530,2094,1555,2115,1570,2137,1570,2159,1559,2188,1534,2210,1515,2228,1490,2249,1497,2278,1515,2322,1505,2376,1523,2409,1559,2401,1581,2383,1613,2376,1642,2387,1704,2412,1787,2427,1866,2423,1921,2416,1964,2423,2015,2423,2120,2416,2196,2423,2348,2423,2474,2423,2568,2423,2630,2423,2814,2420,2909,2420,3082,2427,3249,2438,3303,2438,3281,2409,3260,2380,3260,2347,3256,2318,3241,2286,3205,2260,3173,2224,3115,2173,3086,2130,3089,2072,3104,2021,3144,1992,3223,1956,3285,1920,3332,1880,3379,1855,3430,1833,3473,1833,3513,1833,3553,1858,3592,1851,3676,1877,3632,1862,3715,1887,3741,1884,3777,1869,3817,1819,3817,1772,3817,1727,3770,1701,3720,1709,3669,1785,3650,1790,3611,1801,3582,1801,3542,1797,3509,1793,3469,1801,3437,1801,3397,1815,3346,1804,3249,1804,3293,1801,3220,1801,3177,1801,3112,1790,3054,1790,3018,1772,2996,1750,2978,1728,2964,1699,2931,1667,2902,1656,2855,1616,2826,1594,2873,1634,2801,1572,2790,1536,2765,1493,2754,1457,2743,1424,2746,1388,2768,1373,2779,1352,2801,1326,2815,1301,2826,1272,2848,1243,2866,1210,2888,1185,2906,1156,2920,1134,2935,1105,2946,1080,2964,1044,2985,997,3014,993,3032,972,3018,932,3025,892,3050,867,3069,845,3083,809,3105,787,3126,783,3148,762,3173,729,3202,751,3231,772,3260,812,3315,827,3365,841,3470,848,3503,867,3528,867,3561,881,3590,906,3622,924,3662,939,3680,914,3705,896,3738,906,3756,921,3785,935,3828,921,3854,921,3883,921,3919,910,3962,877,4002,863,4038,841,4031,820,4017,772,3988,743,3966,711,3944,678,3926,657,3926,617,3926,588,3926,559,3926,526,3915,483,3904,443,3886,407,3865,389,3850,356,3839,327,3810,298,3796,273,3756,266,3723,262,3698,229,3691,200,3662,179,3637,168,3615,143,3655,117,3644,85,3608,74,3575,74,3524,59,3499,59,3488,27,3463,38,3409,52,3362,52,3325,77,3260,103,3239,106,3192,106,3159,106,3123,96,3050,88,3003,77,2964,77,2924,67,2891,52,2841,52,2819,63,2772,63,2725,77,2721,121,2663,157,2616,186,2555,182,2526,172,2490,179,2453,179,2432,179,2359,186,2330,200,2348,248,2363,280,2374,302,2399,345,2406,389,2414,429,2439,461,2453,515,2461,566,2464,628,2457,678,2461,728,2450,750,2428,826,2443,865,2447,909,2454,956,2457,992,2428,995,2399,999,2330,1021,2330,1050,2276,1111,2247,1111,2175,1136,2142,1125,2099,1114,2077,1096,2048,1085,2001,1093,1950,1093,1878,1104,1911,1100,1842,1100,1824,1082,1798,1064,1780,1046,1762,1028,1733,1017,1704,1002,1683,981,1647,955,1628,937,1599,919,1556,908,1520,879,1487,854,1455,839,1397,810,1353,789,1324,771,1288,731,1274,673,1263,633,1259,593,1259,557,1230,528,1194,485,1162,456,1151,427,1158,387,1165,351,1187,336,1220,314,1252,300,1274,285,1303,264,1306,220,1296,188,1270,170,1223,141,1194,101,1154,79,1111,65,1078,61,1060,86,1013,94,984,94,959,101,894,112,854,130,800,159,756,180,695,253,720,213,662,242,633,235,572,217,550,213,528,213,471,213,420,213,362,202,315,224,272,264,239,318,221,376,214,416,232,456,261,515,352,500,381,529,386,553,397,561,426,561,466,524,502,488,539,503,575,506,604,514,629,517,676,514,716,481,745,459,763,427,795,405,871,387,878,409,896,463,922,499,947,546,980,568,1016,596,1019,647,1027,672,1005,709,980,734,976,756,990,792,1001,828,1016,857,1034,879,1041,915,1045,940,1056,969,1063,1013,1037,1056,1019,1092,987,1103,951,1143,933,1172,882,1190,828,1201,781,1219,755,1219,726,1219,697,1230,658,1230,625,1244,603,1252,582,1252,538,1252,495,1248,433,1252,397,1266,357,1277,317,1291,252,1302,227,1317,158,1317,133,1328,104,1371,75,1386,53,1415,53,1447,53,1476,53,1509,64,1545,74,1606,99,1606,114,1639,131,1673,144,1708"; // usw.
const sourceWidth = 4096;
const sourceHeight = 2458;
const targetWidth = 1279;
const targetHeight = 768;

const result = scaleCoordinates(inputCoords, sourceWidth, sourceHeight, targetWidth, targetHeight);
console.log(result);


